<link rel="import" href="../../bower_components/polymer/polymer-element.html">

<link rel="import" href="../../bower_components/app-route/app-route.html">
<link rel="import" href="../../bower_components/app-route/app-location.html">

<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="../../src/account-manager/user-signin.html">
<link rel="import" href="../../src/account-manager/create-account.html">

<link rel="import" href="../../src/module-missing/module-missing.html">

<dom-module id="account-manager">
  <template>
    <style is="custom-style">
      :host {
        display: flex;
        flex-direction: row;
        justify-content: center;
        flex-basis: 100%;
        width: 400px;
        margin: 3em auto 0;
        border: solid 0.35px var(--secondary-color);
        padding: 3px 5px;
        box-shadow: 2px 3px 10px 0 var(--secondary-color);
      }

      .separator {
        padding-bottom: 10px;
        margin-bottom: 10px;
        border-bottom: 0.35px solid var(--secondary-color);
      }

      iron-pages { flex-basis: 100%; }
    </style>
    <app-route route="{{route}}" 
      pattern="/:module" 
      data="{{routeData}}" 
      tail="{{subroute}}">
    </app-route>

    <iron-pages selected="[[routeData.module]]" 
      attr-for-selected="account-module"
      fallback-selection="module-missing">
      <create-account account-module="register" route="[[subroute]]"></create-account>
      <user-signin account-module="signin" route="[[subroute]]"></user-signin>
      <module-missing account-module="module-missing" route="[[subroute]]"></module-missing>
    </iron-pages>

  </template>
  <script>
    class AccountManagerElement extends Polymer.Element {
      static get is() { return 'account-manager' }
      static get properties() {
        return {
          route: {
            type: Object,
          },
          routeData: {
            type: Object,
          },
        }
      }
    }

    window.customElements.define(AccountManagerElement.is, AccountManagerElement);
  </script>
</dom-module>
